<!DOCTYPE html><html><head><title>Timeline of composers</title><link rel="icon" type="image/ico" href="favicon_timeline.ico"><script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" /><script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script><link rel="stylesheet" href="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css" /><script src="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script><script src="xinspect.js"></script><script src="timeline.js"></script><style type='text/css'>     body { background-color:#666; margin: none; }     iframe { position:relative; top:30px; left:0px; right:0px; bottom:0px;			  display:block; margin:0 auto; overflow:hidden;}	 #container { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	 #controls { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	 form {float:left;}	.slider {width:271px; margin-left:5px margin-right:5px }	 fieldset {height:60px; float:left;}	 .ui-widget {height:60x; float:left; text-align:center}	 .wrapper {text-align:center; overflow:auto;}	 #inputcomposer {width:230px; float:left; margin:5px}	  .button {  float:left; margin:5px;   }	 #resetButton {}	 </style></head><body id='tlbody' ><div class="wrapper">	<div id="controls">		<form>			<fieldset style="width:600px"><legend>Slice of history</legend>				<div class="ui-widget" >					<label id='labellow' for='controllow'>Beginning of time</label><br />					<input class="slider"  type='range' id='controllow' name='low' 						   min='1000' max='1900' value='' step='1' oninput='displayYear(labellow, controllow, controlhigh)' />					</div>				<div class="ui-widget" style="float:right; ">					<label id='labelhigh' for='controlhigh'>End of time</label><br />					<input class="slider"  type='range' id='controlhigh' name='high'						   min='1200' max='2020' value='' step='1' oninput='displayYear(labelhigh, controlhigh, controllow)' />				</div>			</fieldset>		</form>		<form>			<fieldset style="width:400px; "><legend>Composers</legend>				<div class="ui-widget" ">					<input id='inputcomposer' name='inputcomposer'  />					<input class="button" type="button" id="addButton" value="Add" onClick="addComposerReload()" />					<input class="button" type="button" id="resetButton" value="Reset" onClick="resetComposers()"/>				</div>			</fieldset>		</form>	</div> </div> <div class="wrapper" >	<div class="ui-widget" id="container"  ></div></div><iframe src="info.html" width="1010" height="420" frameborder="0" id='infoframe' name='infoframe' seamless='seamless'		 scrolling="no" ></iframe> <!-- onload="resizeIframe(this)" --><br />		<script>function resetComposers() {	var r = confirm("Clear all composers?");	if (r == true) {		composers = [];		build();		open("info.html", "infoframe");	} else { }}function addComposerReload(){	var link = inputcomposer.value.replace(/ /g, '_');	if (composers.indexOf(link) == -1) { //Check is composer already exists on timeline		getExtract(link).done(function(data) {			if (data.query) {				pages = data.query.pages;					pageid = Object.getOwnPropertyNames(pages);				extract = pages[pageid].extract;				if(extract) {					composers.push(link);					build();				}				else { alert('No wikipedia page found for: ' + inputcomposer.value); }			}			// Fallthrough if data.query is undefined / false (submitted with empty string)		});	}	else { alert('Already on timeline: ' + inputcomposer.value); }}function displayYear(label, con, otherCon){	if (label.id == 'labellow'){		if (con.value >= (otherCon.value)) { con.value = otherCon.value - 20;}	}	if (label.id == 'labelhigh'){		if (con.value <= (otherCon.value)) { con.value = otherCon.value;} // +20 leads to bug where con.value gets set to max	}	label.innerHTML=con.value;	build()}function buildTimeline(composers, low, high, expandFactor){	for (i in composers) {		var c = composers[i];		if (cc[c]) {			if (cc[c].link || cc[c].title || cc[c].dob || cc[c].dod) {				paintComposerBox(cc[c].link, cc[c].title, cc[c].dob, cc[c].dod, low, high, expandFactor);				//console.log('Painted cbox from memory: ' + c );				continue;			}					}		getPage(c).done(function(data) { 			pages = data.query.pages;			pageid = Object.getOwnPropertyNames(pages);			title = pages[pageid].title;			var link = title.replace(/ /g, '_');			var paran = title.search(/\(/);			if (paran != -1){ title = title.substring(0, paran-1); }			rv = pages[pageid].revisions[0];			content = rv["*"];						var bornAndDied = getBornAndDied(link, content);			dob = bornAndDied.dob;			dod = bornAndDied.dod; 						if (!(cc[link])) { 				cc[link] = new composer(); 				cc[link].link = link;				cc[link].title = title;				cc[link].dob = dob;				cc[link].dod = dod;				cc[link].wikitext = content;				cc[link].dobL = bornAndDied.dobL;				cc[link].dodL = bornAndDied.dodL;				cc[link].pob = bornAndDied.pob;				cc[link].pod = bornAndDied.pod;			}			paintComposerBox(link, title, dob, dod, low, high, expandFactor);			console.log('Painted cbox from net: ' + link);		});	}}		function buildAddList() {		function getCompList() {		return $.getJSON(URL, {			action:"parse",			prop:"links",			page:"List_of_composers_by_name",		})	}	getCompList().done(function(data) {		linkObjArray = data.parse.links;		var links = [];		for (i in linkObjArray) {			var obj = linkObjArray[i];			links.push(obj["*"]);		}		$(function() {			$( "#inputcomposer" ).autocomplete({				source: links			});		});		$("#inputcomposer").keyup(function(event){			if(event.keyCode == 13){				//$("#addButton").click();				addComposerReload();			}		});	});	}function fitScale() {	//var span = controlhigh.value - controllow.value + 12;	var span = controlhigh.value - controllow.value;	var w = window.innerWidth;	return w/span; }function build(){	// Reset container	$('#container').empty();	// Set slider labels	labellow.innerHTML = controllow.value;	labelhigh.innerHTML = controlhigh.value;	// Fit to window	var s = fitScale();	//Build the axis	timeAxis(controllow.value, controlhigh.value, s);	//Add composers	buildTimeline(composers, controllow.value, controlhigh.value, s);}function getPrototypeData(obj) {	console.log(cc);	/*for (prop in cc) {		if (!cc.hasOwnProperty(prop)) { continue;}		console.log(cc[prop]);	}*/}/****Main****//*var composers=["Franz_Liszt", "Johann_Sebastian_Bach", "Felix_Mendelssohn", "Wolfgang_Amadeus_Mozart",			"Pyotr_Ilyich_Tchaikovsky", "Frédéric_Chopin", "Joseph_Haydn", 	"Ludwig_van_Beethoven", 			"Edvard_Grieg", "Alexander_Borodin"]; *//* var composers=["Clara_Schumann", "Amy_Beach", "Fanny_Mendelssohn", "Lili_Boulanger",				"Cécile_Chaminade", "Nadia_Boulanger", "Ethel_Smyth", "Élisabeth_Jacquet_de_La_Guerre",				"Louise_Farrenc", "Isabella_Leonarda", "Ruth_Crawford_Seeger", "Barbara_Strozzi", "Elfrida_Andrée",				"Agathe_Backer-Grøndahl", "Germaine_Tailleferre"]; */var composers=["Johann_Sebastian_Bach", "Edvard_Grieg", "Carl_Philipp_Emanuel_Bach", "Aphex_Twin", "Alexander_Borodin", "Hildegard_of_Bingen"];//var composers=["Johann_Sebastian_Bach"];if (composers == undefined) { var composers = [];}controlhigh.max = CURRENTYEAR;// Set startvalues for sliders controllow.value = 1680;controlhigh.value = 2014; build();window.addEventListener('resize', build);// Add data for search-completionbuildAddList();</script></body></html>