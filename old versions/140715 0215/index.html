<!DOCTYPE html><html><head><title>Timeline of composers</title><link rel="icon" type="image/ico" href="favicon_timeline.ico"><script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" /><script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script><link rel="stylesheet" href="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css" /><script src="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script><script src="xinspect.js"></script><script src="timeline.js"></script><style type='text/css'>     body { background-color:#666; margin: none; }     iframe { position:relative; top:30px; left:0px; right:0px; bottom:0px;			  display:block; margin:0 auto; overflow:hidden;}	 #container { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	 #controls { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	.button { width:50px; float:left; margin:5px;   }	 form {float:left;}	.slider {min-width:240px; margin-left:5px margin-right:5px }	 fieldset {height:60px; float:left;}</style></head><body id='tlbody' ><div id="wrapper" style="text-align:center; overflow:auto;"><div id="controls"><form>	<fieldset style="width:500px"><legend>Slice of history</legend>		<div class="ui-widget" style=" height:60px; float:left; text-align:center; position:absolute; left:1%; top:35%; margin-top:0px">			<label id='labellow' for='controllow'>Beginning of time</label><br />			<input class="slider"  type='range' id='controllow' name='low' 				   min='1000' max='2000' value='' step='1' oninput='displayYear(labellow, controllow, controlhigh)' />			</div>		<div class="ui-widget" style=" height:60px; float:right; text-align:center; position:absolute; left:26%; top:35%; margin-top:0px">			<label id='labelhigh' for='controlhigh'>End of time</label><br />			<input class="slider"  type='range' id='controlhigh' name='high'				   min='1020' max='2020' value='' step='1' oninput='displayYear(labelhigh, controlhigh, controllow)' />		</div>	</fieldset></form><div style="float:left;">	<form>		<fieldset style="min-width:175px;"><legend>Scale</legend>			<div class="ui-widget" style="width:300px; height:60px; float:left; position:absolute; top:35%; margin-top:0px">				<button class="button" id="scaleup" name="scaleup" type="button" onclick="changeScale('up')">+</button>				<button class="button" id="scalefit" name="scalefit" type="button" onclick="changeScale('fit')">Fit</button>				<button class="button" id="scaledown" name="scaledown" type="button" onclick="changeScale('down')">-</button>			</div>		</fieldset>	</form>	<form>		<fieldset style="width:294px; "><legend>Add a composer</legend>			<div class="ui-widget" style="width:294px; height:60px; float:left; position:absolute; top:35%; margin-top:0px">				<input id='inputcomposer' name='inputcomposer' style="width:200px; float:left; margin:5px" />				<input class="button" type="button" id="addButton" value="Add" onClick="addComposerReload()" />			</div>		</fieldset>	</form></div></div></div><div id="wrapper" style="text-align:center; overflow:auto;" >	<div class="ui-widget" id="container"  ></div></div><iframe src="info.html" width="1010" height="420" frameborder="0" id='infoframe' name='infoframe' seamless='seamless'		 scrolling="no" ></iframe> <!-- onload="resizeIframe(this)" --><br />		<script>function addComposerReload(){	var link = inputcomposer.value.replace(/ /g, '_');	if (composers.indexOf(link) == -1) { //Check is composer already exists on timeline		getExtract(link).done(function(data) {			if (data.query) {				pages = data.query.pages;					pageid = Object.getOwnPropertyNames(pages);				extract = pages[pageid].extract;				if(extract) {					composers.push(link);					doOver(controllow.value, controlhigh.value, composers, scale)				}				else { alert('No wikipedia page found for: ' + inputcomposer.value); }			}			// Fallthrough if data.query is undefined / false (submitted with empty string)		});	}	else { alert('Already on timeline: ' + inputcomposer.value); }}function displayYear(label, con, otherCon){	if (label.id == 'labellow'){		if (con.value >= (otherCon.value)) { con.value = otherCon.value - 20;}	}	if (label.id == 'labelhigh'){		if (con.value <= (otherCon.value)) { con.value = otherCon.value;} // +20 leads to bug where con.value gets set to max	}	label.innerHTML=con.value;	doOver(controllow.value, controlhigh.value, composers, scale)}function buildTimeline(composers, low, high, expandFactor){	for (i in composers) {		var c = composers[i];		if (cc[c]) {			if (cc[c].link || cc[c].title || cc[c].dob || cc[c].dod) {				paintComposerBox(cc[c].link, cc[c].title, cc[c].dob, cc[c].dod, low, high, expandFactor);				//console.log('Painted cbox from memory: ' + c );				continue;			}					}		getPage(c).done(function(data) { 			pages = data.query.pages;			pageid = Object.getOwnPropertyNames(pages);			title = pages[pageid].title;			var link = title.replace(/ /g, '_');			var paran = title.search(/\(/);			if (paran != -1){ title = title.substring(0, paran-1); }			rv = pages[pageid].revisions[0];			content = rv["*"];						var bornAndDied = getBornAndDied(link, content);			dob = bornAndDied.dob;			dod = bornAndDied.dod; 						if (!(cc[link])) { 				cc[link] = new composer(); 				cc[link].link = link;				cc[link].title = title;				cc[link].dob = dob;				cc[link].dod = dod;				cc[link].wikitext = content;				cc[link].dobL = bornAndDied.dobL;				cc[link].dodL = bornAndDied.dodL;				cc[link].pob = bornAndDied.pob;				cc[link].pod = bornAndDied.pod;			}			paintComposerBox(link, title, dob, dod, low, high, expandFactor);			console.log('Painted cbox from net: ' + link);		});	}}		function buildAddList() {		function getCompList() {		return $.getJSON(URL, {			action:"parse",			prop:"links",			page:"List_of_composers_by_name",		})	}	getCompList().done(function(data) {		linkObjArray = data.parse.links;		var links = [];		for (i in linkObjArray) {			var obj = linkObjArray[i];			links.push(obj["*"]);		}		$(function() {			$( "#inputcomposer" ).autocomplete({				source: links			});		});		$("#inputcomposer").keyup(function(event){			if(event.keyCode == 13){				//$("#addButton").click();				addComposerReload();			}		});	});	}function changeScale(how) {	//console.log(how)	if (how == 'up') { 		console.log(scale);		scale = scale + 0.2;		doOver(controllow.value, controlhigh.value, composers, scale)	}	if (how == 'fit') {		var span = controlhigh.value - controllow.value + 12;		var w = window.innerWidth;		scale = w/span;		doOver(controllow.value, controlhigh.value, composers, scale)	}	if (how == 'down') { 		console.log(scale);		scale = scale - 0.2;		doOver(controllow.value, controlhigh.value, composers, scale)	}	}function doOver(low, high, composers, expandFactor){	$('#container').empty();	build(low, high, composers, expandFactor)	}function build(low, high, composers, expandFactor){	//getPrototypeData(cc);		scale = expandFactor;		//Build the axis	timeAxis(low,high, expandFactor);		//Add composers	buildTimeline(composers, low, high, expandFactor);		// Set startvalues for sliders and options	document.getElementById('labellow').innerHTML = low; controllow.value = low;	labelhigh.innerHTML = high; controlhigh.value = high; 	if (scale <= 1) { document.getElementById('scaledown').disabled = true; }	else { document.getElementById('scaledown').disabled = false; }	if (scale >= 9) { document.getElementById('scaleup').disabled = true; }	else { document.getElementById('scaleup').disabled = false; }		buildAddList();}function getPrototypeData(obj) {	console.log(cc);	/*for (prop in cc) {		if (!cc.hasOwnProperty(prop)) { continue;}		console.log(cc[prop]);	}*/}/*var composers=["Franz_Liszt", "Johann_Sebastian_Bach", "Felix_Mendelssohn", "Wolfgang_Amadeus_Mozart",			"Pyotr_Ilyich_Tchaikovsky", "Frédéric_Chopin", "Joseph_Haydn", 	"Ludwig_van_Beethoven", 			"Edvard_Grieg", "Alexander_Borodin"]; *//* var composers=["Clara_Schumann", "Amy_Beach", "Fanny_Mendelssohn", "Lili_Boulanger",				"Cécile_Chaminade", "Nadia_Boulanger", "Ethel_Smyth", "Élisabeth_Jacquet_de_La_Guerre",				"Louise_Farrenc", "Isabella_Leonarda", "Ruth_Crawford_Seeger", "Barbara_Strozzi", "Elfrida_Andrée",				"Agathe_Backer-Grøndahl", "Germaine_Tailleferre"]; */var composers=["Johann_Sebastian_Bach", "Edvard_Grieg", "Carl_Philipp_Emanuel_Bach", "Aphex_Twin", "Alexander_Borodin"];//var composers=["Johann_Sebastian_Bach", "Hildegard of Bingen"];if (composers == undefined) { var composers = [];}controlhigh.max = CURRENTYEAR;build(1670, 2014, composers, 3);//build(1660, 1960, composers, 6); //För halvskärm//build(1384, 2014, composers, 6); //För helskärm</script></body></html>