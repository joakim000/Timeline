<!DOCTYPE html><html><head><title>Timeline of composers</title><link rel="icon" type="image/ico" href="favicon_timeline.ico"><script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" /><script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script><link rel="stylesheet" href="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css" /><script src="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script><script src="xinspect.js"></script><script src="timeline.js"></script><style type='text/css'>     body { background-color:#AAA; margin: none; }     iframe { position:relative; top:30px; left:0px; right:0px; bottom:0px;			  display:block; margin:0 auto; overflow:hidden;}	 #controlsDiv { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:block; margin:0 auto; overflow:hidden; width:1011px; }	 #container { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }</style></head><body id='tlbody' ><div id="controlsDiv"><form>	<fieldset style="width:600px; height:60px; float:left;"><legend>Slice of history</legend>		<div class="ui-widget" style="width:300px; height:60px; float:left; text-align:center;">			<label id='labellow' for='controllow'>Beginning of time</label>			<input style="width:280px;" type='range' id='controllow' name='low' 				   min='1000' max='2000' value='' step='1' onInput='displayYear(labellow, controllow, controlhigh)' />			</div>		<div class="ui-widget" style="width:300px; height:60px; float:left; text-align:center;">			<label id='labelhigh' for='controlhigh'>End of time</label>			<input style="width:280px;" type='range' id='controlhigh' name='high'				   min='1020' max='2020' value='' step='1' onInput='displayYear(labelhigh, controlhigh, controllow)' />		</div>	</fieldset></form><form>	<!--	<fieldset style="width:30px; height:60px; float:left; position:relative;"><legend>Scale</legend>		<div class="ui-widget" style="width:30px; height:60px; float:left; position:absolute; top:50%; margin-top:-7px">			<select id='zoom' name='zoom'					onInput='doOver(controllow.value, controlhigh.value, composers, zoom.options[zoom.selectedIndex].value)'>				<option id='zoom1' value=1>1</option><option id='zoom2' value=2>2</option>				<option id='zoom3' value=3>3</option><option id='zoom4' value=4>4</option>				<option id='zoom5' value=5>5</option>			</select>		</div>	</fieldset>	-->	<fieldset style="width:30px; height:60px; float:left; position:relative;"><legend>Scale</legend>		<div class="ui-widget" style="width:30px; height:60px; float:left; position:absolute; top:50%; margin-top:-7px">			<select id='zoom' name='zoom'					onInput='doOver(controllow.value, controlhigh.value, composers, zoom.options[zoom.selectedIndex].value)'>				<option id='zoom1' value=1>1</option><option id='zoom2' value=2>2</option>				<option id='zoom3' value=3>3</option><option id='zoom4' value=4>4</option>				<option id='zoom5' value=5>5</option><option id='zoom6' value=6>6</option>				<option id='zoom7' value=7>7</option><option id='zoom8' value=8>8</option>				<option id='zoom9' value=9>9</option>			</select>		</div>	</fieldset></form><form>	<fieldset style="width:275px; height:60px; float:left; position:relative;"><legend>Add a composer</legend>		<div class="ui-widget" style="width:275px; height:60px; float:left; position:absolute; top:50%; margin-top:-7px">			<input id='inputcomposer' name='inputcomposer' style="width:200px;" />			<input type="button" id="addButton" value="Add" onClick="addComposerReload()" />		</div>	</fieldset></form></div><div id="wrapper" style="text-align:center; overflow:auto;" >	<div class="ui-widget" id="container"  ></div></div><iframe src="info.html" width="1010" height="420" frameborder="0" id='infoframe' name='infoframe' seamless='seamless'		 scrolling="no" ></iframe> <!-- onload="resizeIframe(this)" --><br />		<script>function addComposerReload(){	var link = inputcomposer.value.replace(/ /g, '_');	if (composers.indexOf(link) == -1) { //Check is composer already exists on timeline		getExtract(link).done(function(data) {			if (data.query) {				pages = data.query.pages;					pageid = Object.getOwnPropertyNames(pages);				extract = pages[pageid].extract;				if(extract) {					composers.push(link);					doOver(controllow.value, controlhigh.value, composers, zoom.options[zoom.selectedIndex].value)				}				else { alert('No wikipedia page found for: ' + inputcomposer.value); }			}			// Fallthrough if data.query is undefined / false (submitted with empty string)		});	}	else { alert('Already on timeline: ' + inputcomposer.value); }}function displayYear(label, con, otherCon){	if (label.id == 'labellow'){		if (con.value >= (otherCon.value)) { con.value = otherCon.value - 20;}	}	if (label.id == 'labelhigh'){		if (con.value <= (otherCon.value)) { con.value = otherCon.value;} // +20 leads to bug where con.value gets set to max	}	label.innerHTML=con.value;	doOver(controllow.value, controlhigh.value, composers, zoom.options[zoom.selectedIndex].value)}function buildTimeline(composers, low, high, expandFactor){	for (i in composers) {		var c = composers[i];		if (cc[c]) {			if (cc[c].link || cc[c].title || cc[c].dob || cc[c].dod) {				paintComposerBox(cc[c].link, cc[c].title, cc[c].dob, cc[c].dod, low, high, expandFactor);				//console.log('Painted cbox from memory: ' + c );				continue;			}					}		getPage(c).done(function(data) { 			pages = data.query.pages;			pageid = Object.getOwnPropertyNames(pages);			title = pages[pageid].title;			var link = title.replace(/ /g, '_');			var paran = title.search(/\(/);			if (paran != -1){ title = title.substring(0, paran-1); }			rv = pages[pageid].revisions[0];			content = rv["*"];						var bornAndDied = getBornAndDied(link, content);			dob = bornAndDied.dob;			dod = bornAndDied.dod; 						if (!(cc[link])) { 				cc[link] = new composer(); 				cc[link].link = link;				cc[link].title = title;				cc[link].dob = dob;				cc[link].dod = dod;				cc[link].wikitext = content;				cc[link].dobL = bornAndDied.dobL;				cc[link].dodL = bornAndDied.dodL;				cc[link].pob = bornAndDied.pob;				cc[link].pod = bornAndDied.pod;			}			paintComposerBox(link, title, dob, dod, low, high, expandFactor);			console.log('Painted cbox from net: ' + link);		});	}}		function buildAddList() {		function getCompList() {		return $.getJSON(URL, {			action:"parse",			prop:"links",			page:"List_of_composers_by_name",		})	}	getCompList().done(function(data) {		linkObjArray = data.parse.links;		var links = [];		for (i in linkObjArray) {			var obj = linkObjArray[i];			links.push(obj["*"]);		}		$(function() {			$( "#inputcomposer" ).autocomplete({				source: links			});		});		$("#inputcomposer").keyup(function(event){			if(event.keyCode == 13){				//$("#addButton").click();				addComposerReload();			}		});	});	}function doOver(low, high, composers, expandFactor){	$('#container').empty();	build(low, high, composers, expandFactor)	}function build(low, high, composers, expandFactor){	//rerun == true && getPrototypeData(cc);		//Build the axis	timeAxis(low,high, expandFactor);		//Add composers	buildTimeline(composers, low, high, expandFactor);		// Set startvalues for sliders and options	document.getElementById('labellow').innerHTML = low; controllow.value = low;	labelhigh.innerHTML = high; controlhigh.value = high; 	currentZoom = document.getElementById('zoom' + expandFactor); currentZoom.selected='selected';	buildAddList();}function getPrototypeData(obj) {	console.log(cc);	/*for (prop in cc) {		if (!cc.hasOwnProperty(prop)) { continue;}		console.log(cc[prop]);	}*/}/*var composers=["Franz_Liszt", "Johann_Sebastian_Bach", "Felix_Mendelssohn", "Wolfgang_Amadeus_Mozart",			"Pyotr_Ilyich_Tchaikovsky", "Frédéric_Chopin", "Joseph_Haydn", 	"Ludwig_van_Beethoven", 			"Edvard_Grieg", "Alexander_Borodin"]; *//* var composers=["Clara_Schumann", "Amy_Beach", "Fanny_Mendelssohn", "Lili_Boulanger",				"Cécile_Chaminade", "Nadia_Boulanger", "Ethel_Smyth", "Élisabeth_Jacquet_de_La_Guerre",				"Louise_Farrenc", "Isabella_Leonarda", "Ruth_Crawford_Seeger", "Barbara_Strozzi", "Elfrida_Andrée",				"Agathe_Backer-Grøndahl", "Germaine_Tailleferre"]; */var composers=["Johann_Sebastian_Bach", "Wolfgang_Amadeus_Mozart", "Frédéric_Chopin", "Edvard_Grieg", "Carl_Philipp_Emanuel_Bach", "Aphex_Twin"];//var composers=["Johann_Sebastian_Bach", "Hildegard of Bingen"];if (composers == undefined) { var composers = [];}var rerun = false;controlhigh.max = CURRENTYEAR;build(1800, 2014, composers, 6); //För halvskärm//build(1660, 1960, composers, 6); //För halvskärm//build(1384, 2014, composers, 6); //För helskärmrerun = true;</script></body></html>