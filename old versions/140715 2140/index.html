<!DOCTYPE html><html><head><title>Timeline of composers</title><link rel="icon" type="image/ico" href="favicon_timeline.ico"><script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" /><script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script><link rel="stylesheet" href="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.min.css" /><script src="http://malihu.github.io/custom-scrollbar/jquery.mCustomScrollbar.concat.min.js"></script><script src="xinspect.js"></script><script src="timeline.js"></script><style type='text/css'>	/* General */	body { background-color:#666; margin: none; }	form { float:left; margin:10px; }	.outer { text-align:center; overflow:auto;}	.inner { position:relative; display:inline-block; margin:0 auto; overflow:hidden;  }	 	/* Header */	svg { float:left; } 	#lowsvg { margin:21px 20px 0px 0px; } 	#highsvg { margin:21px 0px 0px 20px; } 	.text {fill:#666; stroke:lightblue; stroke-width:2;}	.sliderfield { height:60px; width:300px; }	.slider { width:95%; height:30px; margin:5px; }	 #spacer {float:left; min-width:20px; max-width:100px;}	 		/* Osorterat */		     iframe { position:relative; top:30px; left:0px; right:0px; bottom:0px;			  display:block; margin:0 auto; overflow:hidden;}	 #container { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	 .controls { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }	 	 .ui-widget {height:60x; float:left; text-align:center}	 .wrapper {text-align:center; overflow:auto;}	 #inputcomposer {width:230px; float:left; margin:5px}	  .button {  float:left; margin:5px;   }	 #resetButton {}	  .buttonTemplates { margin: 5 px; float:left} */	  #yearlow {float:left}	  #yearhigh {float:right}	  .svgwrapper {width:150px; height:60px float:left}	 #header { position:relative; top:0px; left:0px; right:0px; bottom:0px;			  display:inline-block; margin:0 auto; overflow:hidden;  }		 			  </style></head><body id='tlbody' ><div class="outer">	<div class="inner" id="header">		<svg class="image" id="lowsvg" width="124" height="70">			<text class="text" id="lowtext" x="0" y="68" font-size="62">1680</text>		</svg>  		<form>			<fieldset class="sliderfield"><legend>Beginning of time</legend>				<div class="sliderdiv" >					<input class="slider"  type='range' id='controllow' name='low' 						   min='1000' max='1900' value='' step='1' 						   oninput='displayYear(controllow.id, controllow.value, controlhigh.value)' />					</div>			</fieldset>		</form>		<div id="spacer">&nbsp;</div> 		<form>			<fieldset class="sliderfield"><legend>End of time</legend>				<div class="slider-div" >					<input class="slider"  type='range' id='controlhigh' name='high'						   min='1200' max='2020' value='' step='1' 						   oninput='displayYear(controlhigh.id, controllow.value, controlhigh.value)' />				</div>				</fieldset>		</form>		<svg class="image" id="highsvg" width="124" height="70">			<text class="text" id="hightext" x="0" y="68" font-size="62" >2014</text>		</svg>  	</div> </div> <div class="wrapper" >	<div class="ui-widget" id="container"  ></div></div><iframe src="info.html" width="1010" height="420" frameborder="0" id='infoframe' name='infoframe' seamless='seamless'		 scrolling="no" ></iframe> <!-- onload="resizeIframe(this)" --><br /><br /><div class="wrapper">	<div class="controls" id="footer">		<form>			<fieldset style="width:320px; "><legend>Composers</legend>				<div class="ui-widget" ">					<input id='inputcomposer' name='inputcomposer'  />					<input class="button" type="button" id="buttonAdd" value="Add" onClick="addComposerReload()" />				</div>			</fieldset>		</form>		<form>			<fieldset style="width:320px"><legend>Templates</legend>				<div class="ui-widget" style="margin:5px">					<input class="buttonTemplates" type="button" id="buttonLoad" value="Load" onClick="" />					<input class="buttonTemplates" type="button" id="buttonSave" value="Save" onClick="" />					<input class="buttonTemplates" type="button" id="buttonReset" value="Reset" onClick="resetComposers()"/>				</div>				</fieldset>		</form>	</div> <!-- End controls --></div> <!-- End wrapper -->		<script>function resetComposers() {	var r = confirm("Clear all composers?");	if (r == true) {		composers = [];		build();		open("info.html", "infoframe");	} else { }}function addComposerReload(){	var link = inputcomposer.value.replace(/ /g, '_');	if (composers.indexOf(link) == -1) { //Check is composer already exists on timeline		getExtract(link).done(function(data) {			if (data.query) {				pages = data.query.pages;					pageid = Object.getOwnPropertyNames(pages);				extract = pages[pageid].extract;				if(extract) {					composers.push(link);					build();				}				else { alert('No wikipedia page found for: ' + inputcomposer.value); }			}			// Fallthrough if data.query is undefined / false (submitted with empty string)		});	}	else { alert('Already on timeline: ' + inputcomposer.value); }}function displayYear(control, low, high){	lowtext = document.getElementById('lowtext');	/*	if (control == 'controllow'){		if (con.value >= (otherCon.value)) { con.value = otherCon.value - 20;}	}	if (control == 'controlhigh'){		if (con.value <= (otherCon.value)) { con.value = otherCon.value;} // +20 leads to bug where con.value gets set to max	}	*/	lowtext.innerHTML=low;	hightext.innerHTML=high;	build()}function buildTimeline(composers, low, high, expandFactor){	for (i in composers) {		var c = composers[i];		if (cc[c]) {			if (cc[c].link || cc[c].title || cc[c].dob || cc[c].dod) {				paintComposerBox(cc[c].link, cc[c].title, cc[c].dob, cc[c].dod, low, high, expandFactor);				//console.log('Painted cbox from memory: ' + c );				continue;			}					}		getPage(c).done(function(data) { 			pages = data.query.pages;			pageid = Object.getOwnPropertyNames(pages);			title = pages[pageid].title;			var link = title.replace(/ /g, '_');			var paran = title.search(/\(/);			if (paran != -1){ title = title.substring(0, paran-1); }			rv = pages[pageid].revisions[0];			content = rv["*"];						var bornAndDied = getBornAndDied(link, content);			dob = bornAndDied.dob;			dod = bornAndDied.dod; 						if (!(cc[link])) { 				cc[link] = new composer(); 				cc[link].link = link;				cc[link].title = title;				cc[link].dob = dob;				cc[link].dod = dod;				cc[link].wikitext = content;				cc[link].dobL = bornAndDied.dobL;				cc[link].dodL = bornAndDied.dodL;				cc[link].pob = bornAndDied.pob;				cc[link].pod = bornAndDied.pod;			}			paintComposerBox(link, title, dob, dod, low, high, expandFactor);			console.log('Painted cbox from net: ' + link);		});	}}		function buildAddList() {		function getCompList() {		return $.getJSON(URL, {			action:"parse",			prop:"links",			page:"List_of_composers_by_name",		})	}	getCompList().done(function(data) {		linkObjArray = data.parse.links;		var links = [];		for (i in linkObjArray) {			var obj = linkObjArray[i];			links.push(obj["*"]);		}		$(function() {			$( "#inputcomposer" ).autocomplete({				source: links			});		});		$("#inputcomposer").keyup(function(event){			if(event.keyCode == 13){				//$("#addButton").click();				addComposerReload();			}		});	});	}function fitScale() {	var span = controlhigh.value - controllow.value;	var w = window.innerWidth;	return w/span; }function build(){	// Reset container	$('#container').empty();	// Set slider labels	lowtext.innerHTML = controllow.value;	hightext.innerHTML = controlhigh.value;	// Fit to window	var s = fitScale();	//Build the axis	timeAxis(controllow.value, controlhigh.value, s);	//Add composers	buildTimeline(composers, controllow.value, controlhigh.value, s);}function getPrototypeData(obj) {	console.log(cc);	/*for (prop in cc) {		if (!cc.hasOwnProperty(prop)) { continue;}		console.log(cc[prop]);	}*/}/****Main****//*var composers=["Franz_Liszt", "Johann_Sebastian_Bach", "Felix_Mendelssohn", "Wolfgang_Amadeus_Mozart",			"Pyotr_Ilyich_Tchaikovsky", "Frédéric_Chopin", "Joseph_Haydn", 	"Ludwig_van_Beethoven", 			"Edvard_Grieg", "Alexander_Borodin"]; *//*var composers=["Clara_Schumann", "Amy_Beach", "Fanny_Mendelssohn", "Lili_Boulanger",				"Cécile_Chaminade", "Nadia_Boulanger", "Ethel_Smyth", "Élisabeth_Jacquet_de_La_Guerre",				"Louise_Farrenc", "Isabella_Leonarda", "Ruth_Crawford_Seeger", "Barbara_Strozzi", "Elfrida_Andrée",				"Agathe_Backer-Grøndahl", "Germaine_Tailleferre", "Johann_Sebastian_Bach", "Edvard_Grieg", "Carl_Philipp_Emanuel_Bach", "Aphex_Twin", "Alexander_Borodin"]; */var composers=["Johann_Sebastian_Bach", "Edvard_Grieg", "Carl_Philipp_Emanuel_Bach", "Aphex_Twin", "Alexander_Borodin", "Hildegard_of_Bingen"];//var composers=["Johann_Sebastian_Bach"];if (composers == undefined) { var composers = [];}controlhigh.max = CURRENTYEAR;// Set startvalues for sliders controllow.value = 1680;controlhigh.value = 2014; build();window.addEventListener('resize', build);// Add data for search-completionbuildAddList();</script></body></html>